{
    "mnt": {
        "test": "hello"
    },
    "home": {
        "note": [
            ["txt"],
            "----------- Moon OS Manual ------------",
            "ls [<d>]-- list directory contents",
            "pwd -- return working directory name",
            "cd <d> -- change directory",
            "mkdir <d> -- make a directory",
            "cat <f> -- concatenate and print a file",
            "rm <f/d> -- remove a file/directory",
            "echo <s> -- output an argument",
            "..[> <f>] -- write to a file",
            "..[>> <f>] -- append to a file",
            "run <f> -- run an executable file",
            "edit <f> -- edit an executable file",
            "exit -- shut down system",
            "---------------------------------------"
        ],
        "misc": {
            "test": "Hello World!"
        },
        "test": [
            ["exe"],
            "lib 'os.get_current_path' path",
            "prt $path"
        ],
        "sample": {
            "hello": [
                ["exe"],
                "prt 'Hello!'",
                "slp 500",
                "prt 'Bye~'"
            ],
            "count": [
                ["exe"],
                "let n 5",
                "#loop",
                "prt $n",
                "sub n $n 1",
                "slp 600",
                "jne $n 0 loop"
            ],
            "compute_age": [
                ["exe"],
                "prt 'Input year born:'",
                "inp _year",
                "int _year $_year",
                "tim _current year",
                "sub age $_current $_year",
                "prt 'Age:'",
                "prt $age"
            ]
        }
    },
    "programs": {
        "cd": [
            ["exe", "change directory"],
            "let path_str $0",
            "jeq $path_str $nil print_error_invalid_name",
            "lib 'util.get_path_by_str' $path_str 0 path",
            "jeq $path $nil print_error_invalid_path",
            "lib 'os.set_current_path' $path",
            "jmp done",
            "#print_error_invalid_name",
            "prt 'ERR Invalid directory name'",
            "jmp done",
            "#print_error_invalid_path",
            "prt 'ERR Invalid path'",
            "#done"
        ],
        "date": [
            ["exe", "display date"],
            "let days []",
            "psh $days 'Sun' 'Mon' 'Tue' 'Wed' 'Thu' 'Fri' 'Sat'",
            "let months []",
            "psh $months 'Jan' 'Feb' 'Mar' 'Apr' 'May' 'Jun' 'Jul' 'Aug' 'Sep' 'Oct' 'Nov' 'Dec'",
            "tim _day day",
            "get $days $_day _day_str",
            "tim _month month",
            "get $months $_month _month_str",
            "tim _date date",
            "tim _year year",
            "let date_str ''",
            "add date_str $date_str $_day_str",
            "add date_str $date_str ' '",
            "add date_str $date_str $_month_str",
            "add date_str $date_str ' '",
            "add date_str $date_str $_date",
            "add date_str $date_str ' '",
            "add date_str $date_str $_year",
            "prt $date_str"
        ],
        "ls": [
            ["exe", "list directory contents"],
            "let type_map {}",
            "put $type_map 'txt' 'TXT'",
            "put $type_map 'exe' 'EXE'",
            "put $type_map 'raw' 'RAW'",
            "put $type_map 'dir' 'DIR'",
            "jeq $0 $nil use_current_path",
            "lib 'util.get_path_by_str' $0 0 path",
            "jeq $path $nil print_error",
            "jmp continue_with_path",
            "#use_current_path",
            "lib 'os.get_current_path' path",
            "#continue_with_path",
            "lib 'os.get_file_list' $path lst",
            "#loop",
            "pol $lst f",
            "jeq $f $nil end",
            "lib 'os.get_file_type' $path $f ft",
            "prt '<' ''",
            "get $type_map $ft t",
            "prt $t ''",
            "prt '> ' ''",
            "prt $f",
            "jmp loop",
            "jmp end",
            "#print_error",
            "prt 'ERR Invalid path'",
            "#end"
        ],
        "mkdir": [
            ["exe", "make a directory"],
            "let path_str $0",
            "jeq $path_str $nil print_error_invalid_name",
            "let new_dir_name ''",
            "#extract_last",
            "pop $path_str c",
            "jeq $c '' continue",
            "jeq $c '/' continue",
            "add new_dir_name $c $new_dir_name",
            "jmp extract_last",
            "#continue",
            "psh $path_str $c",
            "lib 'util.get_path_by_str' $path_str 0 path",
            "jeq $path $nil print_error_invalid_path",
            "lib 'os.make_dir' $path $new_dir_name",
            "jmp done",
            "#print_error_invalid_name",
            "prt 'ERR Invalid file/directory name'",
            "jmp done",
            "#print_error_invalid_path",
            "prt 'ERR No such file/directory'",
            "#done"
        ],
        "programs": [
            ["exe", "show available programs"],
            "lib 'util.get_path_by_str' '/programs' 0 path",
            "lib 'os.get_file_list' $path lst",
            "#loop",
            "pol $lst f",
            "jeq $f $nil end",
            "lib 'os.get_file_type' $path $f ft",
            "jne $ft 'exe' loop",
            "prt $f ''",
            "prt ' - ' ''",
            "lib 'os.get_file_content' $path $f fc",
            "get $fc 0 file_meta",
            "get $file_meta 1 file_desc",
            "prt $file_desc",
            "jmp loop",
            "#end"
        ],
        "pwd": [
            ["exe", "return working directory name"],
            "lib 'os.get_current_path' path",
            "let path_str '/'",
            "#loop",
            "pol $path d",
            "jeq $d $nil done",
            "add path_str $path_str $d",
            "add path_str $path_str '/'",
            "jmp loop",
            "#done",
            "prt $path_str"
        ],
        "rm": [
            ["exe", "remove a file or directory entry"],
            "let path_str $0",
            "jeq $path_str $nil print_error_invalid_name",
            "lib 'util.get_path_by_str' $path_str 1 path",
            "jeq $path $nil print_error_invalid_path",
            "lib 'os.delete_path' $path",
            "jmp done",
            "#print_error_invalid_name",
            "prt 'ERR Invalid file/directory name'",
            "jmp done",
            "#print_error_invalid_path",
            "prt 'ERR No such file/directory'",
            "#done"
        ],
        "slow_print": [
            ["exe", "print a message character by character"],
            "let msg 'Hello World!\\n'",
            "jeq $0 $nil continue",
            "let msg $0",
            "add msg $msg '\\n'",
            "#continue",
            "#loop",
            "pol $msg c",
            "jeq $c '' done",
            "slp 100",
            "prt $c ''",
            "jmp loop",
            "#done"
        ],
        "time": [
            ["exe", "display time"],
            "tim _hour hour",
            "tim _minute minute",
            "tim _second second",
            "let time_str ''",
            "add time_str $time_str $_hour",
            "add time_str $time_str ':'",
            "add time_str $time_str $_minute",
            "add time_str $time_str ':'",
            "add time_str $time_str $_second",
            "prt $time_str"
        ]
    }
}
