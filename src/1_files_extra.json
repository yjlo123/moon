{
    "mnt": {
        "test": "hello"
    },
    "home": {
        "note": [
            ["txt"],
            "----------- Moon OS Manual ------------",
            "programs -- view the available programs",
            "ls [<d>]-- list directory contents",
            "pwd -- return working directory name",
            "cd <d> -- change directory",
            "mkdir <d> -- make a directory",
            "cat <f> -- concatenate and print a file",
            "rm <f/d> -- remove a file/directory",
            "echo <s> -- output an argument",
            "..[> <f>] -- write to a file",
            "..[>> <f>] -- append to a file",
            "run <f> -- run an executable file",
            "edit <f> -- edit an executable file",
            "---------------------------------------"
        ],
        "misc": {
            "test": "Hello World!"
        },
        "challenge": [
            ["txt"],
            "=== CHALLENGE ===",
            "Turn on the 3 LEDs on the bottom right of the monitor",
            "Do not hack the front-end webpage",
            "Use only the supported commands in Moon OS",
            "~Siwei"
        ],
        "led": [
            ["exe"],
            "let val $0",
            "jeq $val $nil error",
            "jeq $val 1 turn_on",
            "jeq $val 0 turn_off",
            "jmp error",
            "#turn_on",
            "led 1",
            "prt 'LED ON'",
            "jmp end",
            "#turn_off",
            "led 0",
            "prt 'LED OFF'",
            "jmp end",
            "#error",
            "prt '1: ON; 0: OFF'",
            "#end"
        ],
        "sample": {
            "hello": [
                ["exe"],
                "prt 'Hello!'",
                "slp 500",
                "prt 'Bye~'"
            ],
            "count": [
                ["exe"],
                "let n 5",
                "#loop",
                "prt $n",
                "sub n $n 1",
                "slp 600",
                "jne $n 0 loop"
            ],
            "compute_age": [
                ["exe"],
                "prt 'Input year born:'",
                "inp _year",
                "int _year $_year",
                "tim _current year",
                "sub age $_current $_year",
                "prt 'Age:'",
                "prt $age"
            ]
        }
    },
    "programs": {
        "cal": [
            ["exe", "displays the calendar of the current month"],
            "let months []",
            "psh $months 'Jan' 'Feb' 'Mar' 'Apr'",
            "psh $months 'May' 'Jun' 'Jul' 'Aug'",
            "psh $months 'Sep' 'Oct' 'Nov' 'Dec'",
            "let month_days []",
            "psh $month_days 31 28 31 30 31 30 31 31 30 31 30 31",
            "tim _day day",
            "tim _month month",
            "tim _date date",
            "tim _year year",
            "get $months $_month _month_str",
            "prt '      ' ''",
            "prt $_month_str ' '",
            "prt $_year",
            "get $month_days $_month day_count",
            "jne $_month 1 check_leap_done",
            "mod res $_year 400",
            "jeq $res 0 leap_year",
            "mod res $_year 100",
            "jeq $res 0 check_leap_done",
            "mod res $_year 4",
            "jeq $res 0 leap_year",
            "jmp check_leap_done",
            "#leap_year",
            "let day_count 29",
            "#check_leap_done",
            "prt 'Su Mo Tu We Th Fr Sa'",
            "let i 0",
            "let column 0",
            "let shift $_day",
            "mod back_off $_date 7",
            "sub shift $shift $back_off",
            "jlt $shift 0 add_seven",
            "jmp adjust_shift",
            "#add_seven",
            "add shift $shift 7",
            "#adjust_shift",
            "add shift $shift 1",
            "mod shift $shift 7",
            "#skip_cell",
            "jeq $i $shift start",
            "prt '   ' ''",
            "add i $i 1",
            "add column $column 1",
            "jmp skip_cell",
            "#start",
            "let i 1",
            "#loop",
            "jgt $i $day_count done",
            "jgt $i 9 print_day",
            "prt ' ' ''",
            "#print_day",
            "prt $i ' '",
            "add i $i 1",
            "add column $column 1",
            "jne $column 7 loop",
            "prt ''",
            "let column 0",
            "jmp loop",
            "#done",
            "prt ''"
        ],
        "cd": [
            ["exe", "change directory"],
            "let path_str $0",
            "jne $path_str $nil continue",
            "lib 'os.get_home_path' home_path",
            "lib 'os.set_current_path' $home_path",
            "jmp done",
            "#continue",
            "lib 'util.get_path_by_str' $path_str 0 path",
            "jeq $path $nil print_error_invalid_path",
            "lib 'os.set_current_path' $path",
            "jmp done",
            "#print_error_invalid_path",
            "prt 'ERR Invalid path'",
            "#done"
        ],
        "date": [
            ["exe", "display date and time"],
            "let days []",
            "psh $days 'Sun' 'Mon' 'Tue' 'Wed' 'Thu' 'Fri' 'Sat'",
            "let months []",
            "psh $months 'Jan' 'Feb' 'Mar' 'Apr'",
            "psh $months 'May' 'Jun' 'Jul' 'Aug'",
            "psh $months 'Sep' 'Oct' 'Nov' 'Dec'",
            "tim _day day",
            "get $days $_day _day_str",
            "tim _month month",
            "get $months $_month _month_str",
            "tim _date date",
            "tim _year year",
            "let date_str ''",
            "add date_str $date_str $_day_str",
            "add date_str $date_str ' '",
            "add date_str $date_str $_date",
            "add date_str $date_str ' '",
            "add date_str $date_str $_month_str",
            "add date_str $date_str ' '",
            "add date_str $date_str $_year",
            "add date_str $date_str ' '",
            "tim _hour hour",
            "tim _minute minute",
            "tim _second second",
            "jgt $_hour 9 add_hour",
            "add date_str $date_str '0'",
            "#add_hour",
            "add date_str $date_str $_hour",
            "add date_str $date_str ':'",
            "jgt $_minute 9 add_minute",
            "add date_str $date_str '0'",
            "#add_minute",
            "add date_str $date_str $_minute",
            "add date_str $date_str ':'",
            "jgt $_second 9 add_second",
            "add date_str $date_str '0'",
            "#add_second",
            "add date_str $date_str $_second",
            "prt $date_str"
        ],
        "hello": [
            ["exe", "show welcome message"],
            "lib 'os.get_os_info' info",
            "get $info 0 os_name",
            "get $info 1 os_ver",
            "prt $os_name ''",
            "prt '  v' ''",
            "prt $os_ver",
            "prt 'Copyright (c) 1992 RunTech, Inc.'",
            "prt 'All rights reserved.'",
            "prt ''",
            "prt 'Welcome'"
        ],
        "ls": [
            ["exe", "list directory contents"],
            "let type_map {}",
            "put $type_map 'txt' 'TXT'",
            "put $type_map 'exe' 'EXE'",
            "put $type_map 'raw' 'RAW'",
            "put $type_map 'dir' 'DIR'",
            "jeq $0 $nil use_current_path",
            "lib 'util.get_path_by_str' $0 0 path",
            "jeq $path $nil print_error",
            "jmp continue_with_path",
            "#use_current_path",
            "lib 'os.get_current_path' path",
            "#continue_with_path",
            "lib 'os.get_file_list' $path lst",
            "#loop",
            "pol $lst f",
            "jeq $f $nil end",
            "lib 'os.get_file_type' $path $f ft",
            "prt '<' ''",
            "get $type_map $ft t",
            "prt $t ''",
            "prt '> ' ''",
            "prt $f",
            "jmp loop",
            "jmp end",
            "#print_error",
            "prt 'ERR Invalid path'",
            "#end"
        ],
        "mkdir": [
            ["exe", "make a directory"],
            "let path_str $0",
            "jeq $path_str $nil print_error_invalid_name",
            "let new_dir_name ''",
            "#extract_last",
            "pop $path_str c",
            "jeq $c '' continue",
            "jeq $c '/' continue",
            "add new_dir_name $c $new_dir_name",
            "jmp extract_last",
            "#continue",
            "psh $path_str $c",
            "lib 'util.get_path_by_str' $path_str 0 path",
            "jeq $path $nil print_error_invalid_path",
            "lib 'os.make_dir' $path $new_dir_name",
            "jmp done",
            "#print_error_invalid_name",
            "prt 'ERR Invalid file/directory name'",
            "jmp done",
            "#print_error_invalid_path",
            "prt 'ERR No such file/directory'",
            "#done"
        ],
        "programs": [
            ["exe", "show available programs"],
            "lib 'util.get_path_by_str' '/programs' 0 path",
            "lib 'os.get_file_list' $path lst",
            "#loop",
            "pol $lst f",
            "jeq $f $nil end",
            "lib 'os.get_file_type' $path $f ft",
            "jne $ft 'exe' loop",
            "prt $f ''",
            "prt ' - ' ''",
            "lib 'os.get_file_content' $path $f fc",
            "get $fc 0 file_meta",
            "get $file_meta 1 file_desc",
            "prt $file_desc",
            "jmp loop",
            "#end"
        ],
        "pwd": [
            ["exe", "return working directory name"],
            "lib 'os.get_current_path' path",
            "let path_str '/'",
            "#loop",
            "pol $path d",
            "jeq $d $nil done",
            "add path_str $path_str $d",
            "add path_str $path_str '/'",
            "jmp loop",
            "#done",
            "prt $path_str"
        ],
        "rm": [
            ["exe", "remove a file or directory entry"],
            "let path_str $0",
            "jeq $path_str $nil print_error_invalid_name",
            "lib 'util.get_path_by_str' $path_str 1 path",
            "jeq $path $nil print_error_invalid_path",
            "lib 'os.delete_path' $path",
            "jmp done",
            "#print_error_invalid_name",
            "prt 'ERR Invalid file/directory name'",
            "jmp done",
            "#print_error_invalid_path",
            "prt 'ERR No such file/directory'",
            "#done"
        ],
        "slow_print": [
            ["exe", "print a message character by character"],
            "let msg 'Hello World!\\n'",
            "jeq $0 $nil continue",
            "let msg $0",
            "add msg $msg '\\n'",
            "#continue",
            "#loop",
            "pol $msg c",
            "jeq $c '' done",
            "slp 100",
            "prt $c ''",
            "jmp loop",
            "#done"
        ],
        "uname": [
            ["exe", "print operating system name"],
            "lib 'os.get_os_info' info",
            "get $info 0 os_name",
            "get $info 1 os_ver",
            "prt $os_name ''",
            "prt '  v' ''",
            "prt $os_ver"
        ],
        "uptime": [
            ["exe", "show how long system has been running"],
            "lib 'os.get_sys_info' info",
            "get $info 'uptime' uptime",
            "div uptime $uptime 1000",
            "tim h hour",
            "tim m minute",
            "tim s second",
            "jgt $h 9 show_hour",
            "prt '0' ''",
            "#show_hour",
            "prt $h ':'",
            "jgt $m 9 show_minute",
            "prt '0' ''",
            "#show_minute",
            "prt $m ':'",
            "jgt $s 9 show_second",
            "prt '0' ''",
            "#show_second",
            "prt $s ' up '",
            "div days $uptime 86400",
            "mod uptime $uptime 86400",
            "div hours $uptime 3600",
            "mod uptime $uptime 3600",
            "div minutes $uptime 60",
            "mod uptime $uptime 60",
            "jeq $days 0 show_time",
            "prt $days ' day'",
            "jeq $days 1 single_day",
            "prt 's' ''",
            "#single_day",
            "prt ',' ' '",
            "#show_time",
            "jgt $hours 9 hour",
            "prt '0' ''",
            "#hour",
            "prt $hours ':'",
            "jgt $minutes 9 minute",
            "prt '0' ''",
            "#minute",
            "prt $minutes ':'",
            "jgt $uptime 9 second",
            "prt '0' ''",
            "#second",
            "prt $uptime"
        ]
    }
}
